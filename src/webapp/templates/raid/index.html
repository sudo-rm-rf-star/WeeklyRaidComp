{% extends "layout.html" %}

{% block content %}
<div class="grid grid-cols-3 auto-cols-max">
    <div class="m-8">
        <a class="flex border-2 inline-block border-dotted border-blue-400 h-36 hover:border-blue-900 text-5xl content-center align-middle" href="{{url_for('.create_raid')}}">
            <p class="text-5xl m-auto text-indigo-600 group-hover:text-indigo-900">+</p>
        </a>
    </div>

    {% for raid in raids %}
    <div class="m-8">
        <a class="flex border-2 border-gray-400 h-36 hover:border-gray-900" href="{{url_for('.raid', name=raid.name, timestamp=raid.timestamp)}}">
        <div class="text-center flex-initial w-36 bg-gray-800 text-white p-4">
            <div>
                <p class="text-xl">{{raid.get_datetime().date.weekday()}}</p>
                <p class="text-sm">{{raid.get_datetime().date.day()}} {{raid.get_datetime().date.month()}}</p>
                <p class="text-sm">{{raid.get_datetime().time}}<p>
            </div>
        </div>
        <div class="flex-1 p-4">
            <p class="text-2xl">{{raid.get_name()}}</p>
            <div class="grid grid-cols-2">
                {% for signup_status, icon in
                [('Accept', '👍'),
                ('Late', '🕒'),
                ('Tentative', '🤷'),
                ('Bench', '🪑'),
                ('Decline', '👎'),
                ('Undecided', '❓')] %}
                {% set characters = raid.get_characters(signup_choice=signup_status) -%}
                {% if characters | length > 0 %}
                <div class="flex m-1">
                    <div class="px-0.5">{{ icon }}</div>
                    <div>{{ characters | length }}</div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </a></div>
    {% endfor %}
</div>
{% endblock %}
